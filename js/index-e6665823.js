import{d as L,a7 as R,a1 as B,h as i,r as g,v as S,o as j,c as F,e as s,i as e,j as a,u as n,g as b,a8 as M,p as N,l as U}from"./index-b92ab863.js";import{a as T,E as z,b as D}from"./el-form-item-06433b22.js";import{E as H}from"./el-button-f4f5d384.js";import{u as K}from"./useKeyDown-a56110c3.js";import{u as _}from"./useValidate-d5d73dda.js";import{h as v}from"./index-f9997644.js";import{_ as P}from"./plugin-vueexport-helper-c27b6911.js";import"./use-form-item-106f16de.js";import"./error-78e43d3e.js";import"./baseClone-bbd624c2.js";import"./Uint8Array-55cee21c.js";import"./event-9519ab40.js";import"./isNil-c75b1b34.js";const u=d=>(N("data-v-64058989"),d=d(),U(),d),q={class:"w-screen h-screen flex min-h-full flex-col justify-center px-6 py-12 lg:px-8"},A={class:"sm:mx-auto sm:w-full sm:max-w-md"},G=u(()=>s("div",{class:"w-full font-bold text-[30px] text-center text-bg"},"登 录",-1)),J={class:"flex w-full justify-between"},O=["checked"],Q=u(()=>s("span",{class:"ml-2"},"记住密码",-1)),W=u(()=>s("a",{href:"#resetPwd",class:"text-[#1e80ff] font-bold"},"忘记密码?",-1)),X=u(()=>s("div",{class:"text-sm text-gray-500"},[b(" 没有账号? "),s("a",{href:"#regist",class:"font-semibold leading-6 text-indigo-600"}," 点击注册 ")],-1)),Y=L({__name:"index",setup(d){const V=R(),y=B(),f=i(),h=i(),x=i(),o=g({email:"",password:"",captcha:""}),k=g({email:_.email,password:_.password,captcha:_.pleaseInput}),E=i(!0),w=()=>{h.value.validate(c=>{if(c){if(o.captcha.toLocaleLowerCase()!==x.value){M.error("验证码不正确"),m();return}v.post("/api/login",o).then(t=>{const{code:l,data:r}=t;l===200&&(V.setInfo(r),y.push({name:"dashboard",replace:!0}))})}})},m=()=>{v.get("/api/login/captcha").then(c=>{const{data:t}=c;f.value.innerHTML=t.data,x.value=t.text.toLocaleLowerCase(),o.captcha=""})};return K(c=>{c.key=="Enter"&&w()}),S(()=>{m()}),(c,t)=>{const l=T,r=z,I=H,C=D;return j(),F("main",q,[s("div",A,[e(C,{"status-icon":"",size:"large",ref_key:"formRef",ref:h,"label-position":"top",model:n(o),rules:n(k),class:"bg-white/40 rounded-2xl shadow-2xl p-7 pt-10"},{default:a(()=>[e(l,null,{default:a(()=>[G]),_:1}),e(l,{prop:"email",label:"邮箱"},{default:a(()=>[e(r,{modelValue:n(o).email,"onUpdate:modelValue":t[0]||(t[0]=p=>n(o).email=p)},null,8,["modelValue"])]),_:1}),e(l,{prop:"password",label:"密码"},{default:a(()=>[e(r,{modelValue:n(o).password,"onUpdate:modelValue":t[1]||(t[1]=p=>n(o).password=p),type:"password"},null,8,["modelValue"])]),_:1}),e(l,{class:"captcha",prop:"captcha",label:"验证码"},{default:a(()=>[e(r,{modelValue:n(o).captcha,"onUpdate:modelValue":t[2]||(t[2]=p=>n(o).captcha=p),placeholder:"请输入"},{append:a(()=>[s("div",{onClick:m,style:{width:"150px"},ref_key:"captchaRef",ref:f},null,512)]),_:1},8,["modelValue"])]),_:1}),e(l,null,{default:a(()=>[s("div",J,[s("div",null,[s("input",{type:"checkbox",checked:n(E)},null,8,O),Q]),W])]),_:1}),e(l,null,{default:a(()=>[e(I,{class:"w-full !text-lg",color:"#626aef",onClick:w},{default:a(()=>[b("login")]),_:1})]),_:1}),e(l,null,{default:a(()=>[X]),_:1})]),_:1},8,["model","rules"])])])}}});const ie=P(Y,[["__scopeId","data-v-64058989"]]);export{ie as default};
